<?php
session_start(); 
include "../connection.php";
//include "includes/include_song.php";
include "../includes/functions.php";

?>

<!DOCTYPE html>
<html>
  <head>
  <script src="js/songList.js"> </script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
<link rel="manifest" href="./manifest.webmanifest">
<meta name="theme-color" content="black">
<meta name="msapplication-navbutton-color" content="black">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title> Music Player</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />

   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"  referrerpolicy="no-referrer" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/css2.css" />
    <link rel="stylesheet" href="css/list.css" />
    
    
  </head>
  
 
  
  <body >
  
 
    <div id="id_music_player" class="music-player">
    
  <div class="time-container">
   <i id="menu" onclick="open_menu()"  class="fa-solid fa-bars"></i><b class="no_selection"> NOW PLAYING</b>   <button id="playlist_button"> <span  class="no_selection material-symbols-outlined"> queue_music</span></button> </div>

             <div class="white">  <p id="p"> </p> </div>
                <div class="thumbnail" >  <img  id="song-image">
                
                 </div>
                 
                 
                 
                 
                
      
      <div id="bottom">
	<div class="time-container">
	
	
	<p>
     <span  onclick="alert('function not available')" class="no_selection material-symbols-sharp"> replay_10 </span> ....
<span onclick="alert('function not available')" class="no_selection material-symbols-sharp"> forward_10 </span> 
</p>



     <button onclick="alert('function not available')" id="love"> <i class="fa-solid fa-heart"></i>   </button>
     
     
     
     
                </div>
       <div class="time-container"> 
     
     <center><b><span class="no_selection" id="song-name"> </span></b> </center>
     
     </div>
     
       
<center><b>
<span   class="no_selection" id="song-artist"> </span></b> </center>
<br>

      <div class="time-container">
      <div id="progress-bar">   <div id="current-progress"></div> </div>
      </div> 
      
      <div class="time-container">
        <span id="current-time"></span>
        
       <p> <span id="songNow"></span>/<span id="songLength"> <span> </p>
        <span id="max-duration"></span>
      </div>
      
      
      <br>
      
      
      
      
      

<div class="hide" id="option_blank"> <div id="options"> 

<button id="hide_option_button">


<i class="fa-solid fa-xmark"></i>  </button>
        <br>
        
        
        
       <center> <marquee id="current_song"></marquee></center>
        <button  id="playAll_button"> Play All </button>
        <button class="hide" id="playOne_button"> Play One </button>
        <button id="shuffle"> Shuffle  All</button> <br>
        <button id="repeat">  Repeat one  </button><br>
        
        
        <a id="song_link">  
  <button id="download">  Download  </button></a/> <br>      
</div></div>



      <div class="player-options">
      <button id="mute" onclick="enableMute()" >
      
      <span class="material-symbols-sharp">
volume_up
</span>
      
        </button>

       <button  id="unmute" onclick="disableMute()" >
       
       
       <span class="material-symbols-sharp">
volume_off
</span>
       </button>
        
        <button id="prev"> <span class="material-symbols-sharp">
skip_previous
</span></button>
         <button id="play"><i class="fa-solid fa-play"></i></button>
        <button id="pause" class="hide"> <i class="fa-solid fa-pause"></i>
        </button>
        
        <button id="next"> <span class="material-symbols-sharp">
skip_next
</span></button>


            <button id="download_button">
        
         <span class="no_selection material-symbols-sharp"> download </span></button> 

      </div>
      <audio id="audio" preload="metadata"> </audio>
      
      <br>
      
      </div>
          
    </div>
    
    
    
    
      
      <div class="hide" id="blank"> <div class="music-list hide" id="music-list"><br>
    <center><p id="close_playlist_button">  Close <i class="fa-solid fa-xmark"></i></p></center>
      <br>
      <div class="all_m"> <center> <b> All Musics</b> </center> </div>
    
      
       <p id="Myplaylist"></p>
       
       </div></div>
       
       <style>
       
      
       
.img{position: fixed; 
border-radius: 3px; 
  top: 10px;
  left: 10px;
  width: 50px;
   }
       
 .img img {
 filter: blur(8px);
  -webkit-filter: blur(8px);
 
 
 
 width:50px; 
 height: 50px; 
 
  border-radius: 50%;
}

.user_name{position: fixed; 
border-radius: 3px; 
  top: 70px;
  left: 10px; }
  .user_email{position: fixed; 
border-radius: 3px; 
  top: 90px;
  left: 10px; }


</style>


<div class="hide" id="network_connection_blank">

 <p class="hide"  id="network_connection">No Internet Connection !!

</p>
 </div>
       
       
      
 
      <div class="hide" id="sidebar"> 
      
      <div class="all_mt"> 
      
<?php  include "includes/include_profile.php";
      ?>
      <?php //echo browserName();
       ?>
      
      </div>
      <br>
      <center><p id="close_sidebar_button" onclick="close_sidebar()"> <br> <i class="fa-solid fa-xmark"></i> </p></center>
      </div>
     
     
     
     
     
     
 <script>
     const setSong = (arrayIndex) => {
  
  let { id, name, link, artist, image, language } = songsList[arrayIndex];
  audio.src = link;
  songName.innerHTML = name; 
  
  songArtist.innerHTML =artist;
 
songImage.src = image;
  songImage.alt = name;
  
  
  navigator.mediaSession.metadata.title =name;
  navigator.mediaSession.metadata.artist =artist;
  
  
  song_download_title=name;
//  playAudio();
  
  audio.onloadedmetadata = () => {
    maxDuration.innerText = timeFormatter(audio.duration);
  };
};



const setSongs = (arrayIndex) => {
  
  let { id, name, link, artist, image, language } = songsList[arrayIndex];
  audio.src = link;
  songName.innerHTML = name;
  songArtist.innerHTML =artist;
  
 songImage.src = image;
  songImage.alt = name;
  
  navigator.mediaSession.metadata.title =name;
  navigator.mediaSession.metadata.artist =artist;
  
  
  
  
  song_link.href=link;
  playAudio();
  music_list.style.display='none'; 
  blank.style.display='none'; 
  
    songNow.innerHTML=arrayIndex+1;

  audio.onloadedmetadata = () => {
    maxDuration.innerText = timeFormatter(audio.duration);
  };
};


const songsInfo = (arrayIndex) => {
  
  let { id, name, link, artist, image, language } = songsList[arrayIndex];
  
  
  song_link.href=link;
  song_link.target='_blank';
  current_song.innerHTML='<b>'+name+' ft. ' + artist + '</b>';
  
  
  musiclist_close();
 open_option();
// alert( name);


}
     </script>
     
     
   <script src="js/script.js"></script>
   <script src="js/session_media.js"></script>';
   <script>
   
   var sidebar=document.getElementById("sidebar");
   var menu = document.getElementById("menu");
   var love = document.getElementById("love");
   
   
   function open_menu() {
   
   sidebar.style.display='block'; 
   sidebar.style.width="70%";
   }
   
  function   close_sidebar(){
   sidebar.style.display='none'; 
   }
   

function add_to_fav() { 
  alert('fav');
} 


function enableMute() { 
var unmute = document.getElementById("unmute");
  my_song.muted = true;
  mute.style.display='none';
  unmute.style.display='block';
  
} 



function disableMute() { 
var mute = document.getElementById("mute");

  my_song.muted = false;
  mute.style.display='block';
  unmute.style.display='none';
}

function changeVolume() {
  var vv = document.getElementById("vol").value;
  var src= my_song.src;
  var vx=vv/100;
  my_song.volume = vx;
}



if (document.addEventListener) {
  document.addEventListener('contextmenu', function(e) {
  
 //   open_menu();
    e.preventDefault();
  }, false);
} else {
  document.attachEvent('oncontextmenu', function() {
 
    window.event.returnValue = false;
  });
}

</script>





<script>
var network_connection=document.getElementById("network_connection");
network_connection_blank=document.getElementById("network_connection_blank");


setInterval(function () {
var network_conn='show'; 

if(network_conn=='show'){online_offline(); }
}, 1);



function online_offline() {
  var x = navigator.onLine;
  if(x==false){
 
 network_connection.style.display = "block";
 network_connection_blank.style.display = "block";
  }
  else{
  network_connection.style.display = "none";
 network_connection_blank.style.display = "none";
  }  
  
  
 
  
}
</script>

<?php 

echo '<script src="./index.js" type="module"></script>';


?>
  
  </body>
</html>